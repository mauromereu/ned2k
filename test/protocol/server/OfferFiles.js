const assert = require('assert');
const Buffer = require('buffer').Buffer;
const OfferFiles = require('../../../lib/protocol/server/OfferFiles');

describe('offer files packet', () => {
  it('#encode', () => {
    let offerFiles = new OfferFiles([{
      hash: '00',
      ip: 0x0,
      port: 4662,
      name: 'a',
      size: 0x01,
      type: OfferFiles.FILETYPE.DOCUMENT
    }]);

    let buf = offerFiles.encode();
    assert.deepEqual(buf, Buffer.from([
      0x01, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00,
      0x00, 0x00, 0x00, 0x00,
      0x36, 0x12, 0x03, 0x00,
      0x00, 0x00, 0x02, 0x01,
      0x00, 0x01, 0x01, 0x00,
      0x61, 0x03, 0x01, 0x00,
      0x02, 0x01, 0x00, 0x00,
      0x00, 0x02, 0x01, 0x00,
      0x03, 0x03, 0x00, 0x44,
      0x6f, 0x63
    ]));
  });
});